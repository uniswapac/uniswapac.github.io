(this["webpackJsonp@uniswap/interface"]=this["webpackJsonp@uniswap/interface"]||[]).push([[9],{1659:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return c}));var n=function(e,t){var r=Math.floor(e);return"".concat(r," ").concat(t).concat(1===r?"":"s")},c=function(e){return 1!==e?"s":""}},1667:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(e){return{address:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",amount:e,decimals:18,name:"Ethereum",priceInfo:{baseAsset:"ETH",basePrice:e,ETHPrice:e},symbol:"ETH",tokenId:"ETH",tokenType:"ERC20"}}},1668:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(26),c=r(69),a=r(279),s=function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=c.a.from(0),i=c.a.from(0),o=e.sellorders[0],u=c.a.from(1).mul(10).pow(18),l=o.ammFeePercent?100*(100+o.ammFeePercent):11e3;if(e.marketplace===a.e.NFTX){var b=c.a.from(1).mul(10).pow(16);s=(s=c.a.from(l).div(100).mul(n+1)).mul(b),i=(i=c.a.from(l).div(100).mul(n)).mul(b)}e.marketplace===a.e.NFT20&&(s=(s=c.a.from(100).mul(n+1)).mul(u),i=(i=c.a.from(100).mul(n)).mul(u));var d=c.a.from(null===(t=o.ethReserves)||void 0===t?void 0:t.toLocaleString("fullwide",{useGrouping:!1})),f=c.a.from(null===(r=o.tokenReserves)||void 0===r?void 0:r.toLocaleString("fullwide",{useGrouping:!1})),g=d.mul(s).mul(1e3),j=f.sub(s).mul(997),O=d.mul(i).mul(1e3),w=f.sub(i).mul(997),m=g.div(j),h=O.div(w);return(m=(m=m.sub(h)).mul(101).div(100)).toString()},i=function(e){if(!e.some((function(e){return e.asset.marketplace===a.e.NFTX||e.asset.marketplace===a.e.NFT20})))return e;var t=function(e){return e===a.e.NFTX||e===a.e.NFT20},r=Object(n.a)(e),i=r.reduce((function(e,r){var n=r.asset,c=n.marketplace;if(!t(c))return e;var a=n.address+n.marketplace;return Object.keys(e).includes(a)?e[a].push(n.tokenId):e[a]=[n.tokenId],e}),{}),o=r.reduce((function(e,r){var n=r.asset,c=n.marketplace;if(!n.updatedPriceInfo)return e;if(!t(c))return e;var a=n.address+n.marketplace;return Object.keys(e).includes(a)?e[a]=[e[a][0]+1,n]:e[a]=[1,n],e}),{}),u=Object.keys(o).reduce((function(e,t){return e[t]=function(e,t){for(var r=c.a.from(0),n=0;n<t;n++){var a=c.a.from(s(e,n));r=r.add(a)}return r.div(t).toString()}(o[t][1],o[t][0]),e}),{});return r.forEach((function(e){if(t(e.asset.marketplace)){var r=e.asset,n=!!r.updatedPriceInfo,c=n?u[r.address+r.marketplace]:s(r,i[r.address+r.marketplace].indexOf(e.asset.tokenId));n&&e.asset.updatedPriceInfo?e.asset.updatedPriceInfo.ETHPrice=e.asset.updatedPriceInfo.basePrice=c:e.asset.currentEthPrice=e.asset.priceInfo.ETHPrice=c}})),r}},1691:function(e,t,r){"use strict";function n(e,t,r){if(e.has(t))return e.get(t);var n=r&&Array.from(r).reduce((function(e,t){return!(!e&&!(null===t||void 0===t?void 0:t.rarity))}),!1);return n&&e.set(t,n),n}r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return c}));var c=function(e,t){return"/nfts/asset/".concat(e.address,"/").concat(e.tokenId).concat(t?"?origin=".concat(t):"")}},1693:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n,c=r(4),a=r.n(c),s=r(15);!function(e){e.ETH="ETH",e.LOOKS="LOOKS",e.MATIC="MATIC"}(n||(n={}));var i=function(){var e=Object(s.a)(a.a.mark((function e(){var t,r,c=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:n.ETH,e.prev=1,e.next=4,fetch("https://api.coinbase.com/v2/exchange-rates?currency=".concat(t));case 4:return r=e.sent,e.abrupt("return",r.json().then((function(e){return e.data.rates.USD})));case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},1899:function(e,t,r){},1900:function(e,t,r){},1901:function(e,t,r){},1902:function(e,t,r){},1903:function(e,t,r){},1909:function(e,t,r){"use strict";r.r(t);var n,c=r(26),a=r(11),s=r(69),i=r(149),o=r(16),u=r(928),l=r(378),b=r(142),d=r(76),f=r(116),g=r(328),j=r(279),O=r(458),w=r(53),m=r(58),h=(r(327),r(497),r(1899),r(0)),p=[j.c.FETCHING_ROUTE,j.c.CONFIRMING_IN_WALLET,j.c.FETCHING_FINAL_ROUTE,j.c.PROCESSING_TRANSACTION],z=function(e){var t=e.balance,r=e.isConnected,n=e.sufficientBalance,c=e.totalEthPrice,a=e.totalUsdPrice,s=e.bagStatus,i=e.setBagStatus,o=e.fetchReview,u=e.assetsAreInReview,z=Object(w.s)(),x=Object(w.d)(m.a.WALLET),v=p.includes(s)||x,I=r&&(v||!n||u),E=r&&(!n||s===j.c.WARNING);return Object(h.jsxs)(f.b,{className:"rgw6ez27n rgw6ez2d5 rgw6ezuz",children:[E&&Object(h.jsx)(f.c,{className:"m29kpj4 rgw6ez2ib rgw6ez21t rgw6ez60l rgw6ez625 rgw6ez40t rgw6ez9t rgw6ezc5",children:n?"Something went wrong. Please try again.":"Insufficient funds (".concat(Object(O.e)(t.toString())," ETH)")}),Object(h.jsxs)(f.b,{borderTopLeftRadius:E?"0":"12",borderTopRightRadius:E?"0":"12",className:"rgw6ez27n rgw6ez2d5 rgw6ez2ib rgw6ez21t rgw6ez4dz rgw6ez46b rgw6ez63p rgw6ez659",children:[Object(h.jsx)(d.b,{marginBottom:"8",style:{lineHeight:"20px",opacity:"0.54"},className:g.m,children:"Total"}),Object(h.jsxs)(f.b,{marginBottom:"16",children:[Object(h.jsxs)(f.c,{justifyContent:"space-between",children:[Object(h.jsx)(d.b,{className:g.i,children:"".concat(Object(O.e)(c.toString()))}),Object(h.jsxs)(f.c,{className:"m29kpj8 rgw6ez2hn rgw6ez215 rgw6ez4dz rgw6ez3mh rgw6ez26n rgw6ez2ct rgw6ezab rgw6ezc5 rgw6ez601",children:[Object(h.jsx)(d.b,{as:"img",src:l.a,alt:"Ethereum",width:"24",height:"24"}),"ETH"]})]}),Object(h.jsx)(d.b,{fontWeight:"normal",style:{lineHeight:"20px",opacity:"0.6"},className:g.c,children:"".concat(Object(O.a)(a,!0))})]}),Object(h.jsxs)(f.c,{as:"button",color:"explicitWhite",className:"m29kpj6 rgw6eza5 rgw6ez2ib rgw6ez21t rgw6ez4hb rgw6ez46b rgw6ez66h rgw6ez5z1 rgw6ezc5 rgw6ez5xx rgw6ez40t rgw6ez3n5",disabled:I,onClick:function(){r?s===j.c.ADDING_TO_BAG?o():s!==j.c.CONFIRM_REVIEW&&s!==j.c.WARNING||i(j.c.FETCHING_FINAL_ROUTE):z()},children:[v&&Object(h.jsx)(b.a,{size:"20px",stroke:"backgroundSurface"}),!r||x?"Connect wallet":s===j.c.FETCHING_FINAL_ROUTE||s===j.c.CONFIRMING_IN_WALLET?"Proceed in wallet":s===j.c.PROCESSING_TRANSACTION?"Transaction pending":"Pay"]})]})]})},x=r(230),v=r(31),I=r(2),E=Object(I.keyframes)(n||(n=Object(v.a)(["\n  0% {\n    stroke-dashoffset: 1000;\n  }\n  100% {\n    stroke-dashoffset: 0;\n  }\n"]))),N=I.default.circle.withConfig({componentId:"sc-5ix82i-0"})(["stroke-dasharray:1000;stroke-dashoffset:0;-webkit-animation:"," linear;animation:"," linear;animation-duration:160s;stroke:",";"],E,E,(function(e){return e.theme.accentActive})),A=function(){return Object(h.jsx)(d.b,{display:"flex",position:"absolute",children:Object(h.jsx)("svg",{height:"18px",width:"18px",children:Object(h.jsx)(N,{strokeWidth:"".concat(1.5),strokeLinecap:"round",style:{transform:"rotate(90deg)",transformOrigin:"50% 50%"},fill:"transparent",r:"8px",cx:"9px",cy:"9px"})})})},T=r(137),k=(r(1900),r(1691)),y=r(1),_=r(55),C=(r(1901),"_1kuawc5 rgw6ez46n rgw6ez3m5 rgw6ez9z rgw6ezbt"),P="rgw6ez12b rgw6ez18n rgw6ez5yt",R="_1kuawcf",S=function(){return Object(h.jsx)(d.b,{position:"relative",background:"loadingBackground",className:P,children:Object(h.jsxs)(d.b,{position:"absolute",textAlign:"center",left:"1/2",top:"1/2",style:{transform:"translate3d(-50%, -50%, 0)"},color:"grey500",fontSize:"12",fontWeight:"normal",children:["Image",Object(h.jsx)("br",{}),"not",Object(h.jsx)("br",{}),"available"]})})},H=function(e){var t=e.asset,r=e.removeAsset,n=e.showRemove,c=e.grayscale,s=e.isMobile,i=Object(y.useState)(!1),o=Object(a.a)(i,2),u=o[0],l=o[1],b=Object(y.useState)(!1),g=Object(a.a)(b,2),j=g[0],w=g[1],m=Object(y.useState)(!t.smallImageUrl),p=Object(a.a)(m,2),z=p[0],v=p[1],I=function(){return l(!u)},E=Object(y.useRef)(null);return u&&E.current&&!1===E.current.matches(":hover")&&l(!1),Object(h.jsx)(_.b,{to:Object(k.a)(t),style:{textDecoration:"none"},children:Object(h.jsxs)(f.c,{ref:E,className:"_1kuawc1 rgw6ez46b rgw6ez2n5 rgw6ez3mt rgw6ez5xx rgw6ez1a5 rgw6ez5z1",onMouseEnter:I,onMouseLeave:I,children:[Object(h.jsxs)(d.b,{position:"relative",display:"flex",children:[Object(h.jsx)(d.b,{display:n?"block":"none",className:"rgw6ez41t rgw6ez33n rgw6ez395",onClick:function(e){e.preventDefault(),e.stopPropagation(),r(t)},transition:"250",style:{opacity:u||s?"1":"0"},zIndex:"1",children:Object(h.jsx)(T.o,{})}),!z&&Object(h.jsx)(d.b,{as:"img",src:t.smallImageUrl,alt:t.name,className:Object(x.default)(P,c&&!u&&R),onLoad:function(){w(!0)},onError:function(){v(!0)},visibility:j?"visible":"hidden"}),!j&&Object(h.jsx)(d.b,{position:"absolute",className:"".concat(P," ").concat("_2kdvfw1")}),z&&Object(h.jsx)(S,{})]}),Object(h.jsxs)(f.b,{overflow:"hidden",height:"full",justifyContent:"space-between",color:c?"textSecondary":"textPrimary",children:[Object(h.jsxs)(f.b,{children:[Object(h.jsx)(f.c,{overflow:"hidden",whiteSpace:"nowrap",gap:"2",children:Object(h.jsx)(d.b,{className:"_1kuawcn rgw6ez9z rgw6ezc5 rgw6ez68l rgw6ez3yz rgw6ez3yt",children:t.name||t.tokenId})}),Object(h.jsxs)(f.c,{overflow:"hidden",whiteSpace:"nowrap",gap:"2",children:[Object(h.jsx)(d.b,{className:"_1kuawcp rgw6ezbt rgw6ez9z rgw6ez68l rgw6ez3yt rgw6ez3yz",children:t.collectionName}),t.collectionIsVerified&&Object(h.jsx)(T.pb,{className:"rgw6ez3r5"})]})]}),Object(h.jsx)(f.c,{className:"_1kuawcl rgw6ez3m5 rgw6eza5 rgw6ezbt",children:"".concat(Object(O.e)(t.updatedPriceInfo?t.updatedPriceInfo.ETHPrice:t.priceInfo.ETHPrice)," ETH")})]})]})})},L=function(e){var t,r=e.asset,n=e.markAssetAsReviewed,c=e.top,a=e.isMobile,i=s.a.from(null===(t=r.updatedPriceInfo)||void 0===t?void 0:t.ETHPrice).gt(s.a.from(r.priceInfo.ETHPrice));return Object(h.jsxs)(f.b,{className:"rgw6ez2in rgw6ez225 rgw6ez4gz rgw6ez3mh rgw6ez46b rgw6ez5y9 rgw6ez679 rgw6ez4oz rgw6ez4u5 rgw6ez1a5 rgw6ez5xx",borderTopColor:c?"backgroundOutline":"transparent",children:[Object(h.jsxs)(f.c,{className:C,children:[i?Object(h.jsx)(T.eb,{}):Object(h.jsx)(T.db,{}),Object(h.jsx)(d.b,{children:"Price ".concat(i?"increased":"decreased"," from ").concat(Object(O.e)(r.priceInfo.ETHPrice)," ETH")})]}),Object(h.jsx)(H,{asset:r,removeAsset:function(){},isMobile:a}),Object(h.jsxs)(f.c,{gap:"12",justifyContent:"space-between",children:[Object(h.jsx)(d.b,{className:"_1kuawcd _1kuawc9 rgw6ez9z rgw6ez2hz rgw6ez21h rgw6ez13t rgw6ez44t rgw6ezc5 rgw6ez3zh rgw6ez5z1 rgw6ez5a5",onClick:function(e){e.preventDefault(),e.stopPropagation(),n(r,!1)},children:"Remove"}),Object(h.jsx)(d.b,{className:"_1kuawcb _1kuawc9 rgw6ez9z rgw6ez2hz rgw6ez21h rgw6ez13t rgw6ez44t rgw6ezc5 rgw6ez3zh rgw6ez5z1 rgw6ez5dz",onClick:function(e){e.preventDefault(),e.stopPropagation(),n(r,!0)},children:"Keep"})]})]})},F=function(e){var t=e.assets;return Object(h.jsx)(f.b,{display:"grid",style:{gridTemplateColumns:"repeat(".concat(t.length,", 20px)"),width:"".concat(32+20*(t.length-1),"px")},children:t.map((function(e,r){return Object(h.jsx)(d.b,{as:"img",src:e.smallImageUrl,width:"32",height:"32",borderStyle:"solid",borderWidth:"1px",borderColor:"backgroundSurface",borderRadius:"4",style:{zIndex:t.length-r},className:R},"preview".concat(r))}))})},G=function(e){var t=e.assets,r=e.clearUnavailableAssets,n=e.didOpenUnavailableAssets,c=e.setDidOpenUnavailableAssets,s=e.isMobile,i=Object(y.useReducer)((function(e){return!e}),!1),o=Object(a.a)(i,2),u=o[0],l=o[1],b=Object(y.useState)(8),d=Object(a.a)(b,2),g=d[0],j=d[1];return Object(y.useEffect)((function(){if(g){var e=setInterval((function(){j(g-1)}),1e3);return function(){return clearInterval(e)}}n||(r(),c(!1))}),[g,r,n,c]),t&&0!==t.length?Object(h.jsxs)(f.b,{className:"rgw6ez2in rgw6ez225 rgw6ez4gz rgw6ez3mt rgw6ez46b rgw6ez5y9 rgw6ez679 rgw6ez4oz rgw6ez52b rgw6ez4u5 rgw6ez1a5",children:[Object(h.jsxs)(f.c,{className:C,justifyContent:"space-between",children:["No longer available for sale",!n&&Object(h.jsxs)(f.c,{position:"relative",width:"20",height:"20",color:"textPrimary",justifyContent:"center",cursor:"pointer",onClick:function(){return r()},children:[Object(h.jsx)(A,{}),Object(h.jsx)(T.s,{})]})]}),1===t.length&&Object(h.jsx)(H,{asset:t[0],removeAsset:function(){},grayscale:!0,isMobile:s}),t.length>1&&Object(h.jsxs)(f.b,{children:[Object(h.jsxs)(f.c,{justifyContent:"space-between",marginBottom:u?"12":"0",cursor:"pointer",onClick:function(){!n&&c(!0),l()},children:[Object(h.jsxs)(f.c,{gap:"12",fontSize:"14",color:"textSecondary",fontWeight:"normal",style:{lineHeight:"20px"},children:[!u&&Object(h.jsx)(F,{assets:t.slice(0,5)}),"".concat(t.length," unavailable NFTs")]}),Object(h.jsx)(f.c,{color:"textSecondary",children:u?Object(h.jsx)(T.m,{}):Object(h.jsx)(T.k,{})})]}),Object(h.jsx)(f.b,{gap:"8",children:u&&t.map((function(e){return Object(h.jsx)(H,{asset:e,removeAsset:function(){},grayscale:!0,isMobile:s},e.id)}))})]})]}):null},U=r(543),B=(r(1902),function(e){var t=e.onClick,r=void 0===t?function(){return null}:t;return Object(h.jsx)(d.b,{className:"_199qdl71 rgw6ez38n rgw6ez2xn rgw6ez14h rgw6ez1an rgw6ez41z rgw6ez3xt rgw6ez4fz rgw6ez3jt",onClick:r})}),W=r(79),M=r(219),D=r(600),V=r(1667),Q=r(1668),X=r(1693),J=r(1659),K=r(8),q=function(e){return e.updatedPriceInfo?s.a.from(e.updatedPriceInfo.ETHPrice).sub(s.a.from(e.priceInfo.ETHPrice)):s.a.from(0)},Y=function(e,t){return q(e).gt(q(t))?-1:1},Z=r(350),$=r(99),ee=(r(1903),function(){return Object(h.jsx)(f.a,{height:"full",children:Object(h.jsxs)(f.b,{gap:"12",children:[Object(h.jsx)(f.a,{children:Object(h.jsx)(T.J,{color:W.c.colors.textTertiary})}),Object(h.jsxs)(f.b,{gap:"16",children:[Object(h.jsx)(f.a,{className:g.l,style:{lineHeight:"24px"},children:"Your bag is empty"}),Object(h.jsx)(f.a,{fontSize:"12",fontWeight:"normal",color:"textSecondary",style:{lineHeight:"16px"},children:"Selected NFTs will appear here"})]})]})})}),te=function(e){var t=e.top,r=e.show;return Object(h.jsx)(d.b,{marginX:"16",borderWidth:"1px",borderStyle:"solid",borderColor:"transparent",borderTopColor:t?"transparent":"backgroundOutline",borderBottomColor:t?"backgroundOutline":"transparent",opacity:r?"1":"0",transition:"250"})},re=function(e){var t=e.numberOfAssets,r=e.toggleBag,n=e.resetFlow;return Object(h.jsxs)(f.b,{gap:"4",paddingX:"32",marginBottom:"20",children:[Object(h.jsxs)(f.c,{className:"_1jcz50r5 rgw6ezbz rgw6eza5 rgw6ez46b rgw6ez41n",children:["My bag",Object(h.jsx)(d.b,{display:"flex",padding:"2",color:"textSecondary",cursor:"pointer",onClick:r,children:Object(h.jsx)(T.f,{})})]}),t>0&&Object(h.jsxs)(d.b,{fontSize:"14",fontWeight:"normal",style:{lineHeight:"20px"},color:"textPrimary",children:[Object(J.b)(t,"NFT")," \xb7"," ",Object(h.jsx)(d.b,{as:"span",className:"_1jcz50r7 rgw6ez46n rgw6ez5xx rgw6ezc5",onClick:function(){n()},children:"Clear all"})]})]})};t.default=function(){var e=Object(o.useWeb3React)().account,t=Object(M.d)((function(e){return e.bagStatus})),r=Object(M.d)((function(e){return e.setBagStatus})),n=Object(M.d)((function(e){return e.markAssetAsReviewed})),l=Object(M.d)((function(e){return e.didOpenUnavailableAssets})),b=Object(M.d)((function(e){return e.setDidOpenUnavailableAssets})),d=Object(M.d)((function(e){return e.isLocked})),g=Object(M.d)((function(e){return e.setLocked})),O=Object(M.d)((function(e){return e.reset})),w=Object(M.d)((function(e){return e.itemsInBag})),m=Object(M.d)((function(e){return e.setItemsInBag})),p=Object(M.d)((function(e){return e.removeAssetFromBag})),x=Object(M.d)((function(e){return e.bagExpanded})),v=Object(M.d)((function(e){return e.toggleBag})),I=Object(M.m)(),E=I.address,N=I.balance,A=!!I.provider&&!!E,T=Object($.f)().pathname,k=T.startsWith("/nfts/sell"),_=T.startsWith("/nfts")&&!k,C=Object(M.g)(),P=Object(Z.useQueryClient)(),R=Object(y.useMemo)((function(){return Object(Q.a)(w)}),[w]),S=Object(y.useMemo)((function(){return Object(V.a)(R.reduce((function(e,t){return e.add(s.a.from(t.asset.priceInfo.ETHPrice))}),s.a.from(0)).toString())}),[R]),F=Object(y.useState)(!1),W=Object(a.a)(F,2),J=W[0],q=W[1],ne=Object(y.useState)(!1),ce=Object(a.a)(ne,2),ae=ce[0],se=ce[1],ie=Object(y.useState)(0),oe=Object(a.a)(ie,2),ue=oe[0],le=oe[1],be=Object(Z.useQuery)(["fetchPrice",{}],(function(){return Object(X.a)()}),{}).data,de=Object(Z.useQuery)(["assetsRoute"],(function(){return Object(D.h)({toSell:[S],toBuy:R.map((function(e){return e.asset})),senderAddress:null!==e&&void 0!==e?e:""})}),{enabled:!1}),fe=de.data,ge=de.refetch,je=Object(y.useMemo)((function(){var e=R.reduce((function(e,t){return t.status!==j.b.UNAVAILABLE?e.add(s.a.from(t.asset.updatedPriceInfo?t.asset.updatedPriceInfo.ETHPrice:t.asset.priceInfo.ETHPrice)):e}),s.a.from(0));return{totalEthPrice:e,totalUsdPrice:be?parseFloat(Object(i.formatEther)(e))*be:void 0}}),[R,be]),Oe=je.totalEthPrice,we=je.totalUsdPrice,me=Object(y.useMemo)((function(){var e=Object(u.parseEther)(N.toString());return{balance:e,sufficientBalance:!A||s.a.from(e).gte(Oe)}}),[N,Oe,A]),he=me.balance,pe=me.sufficientBalance;Object(y.useEffect)((function(){if(fe&&t===j.c.FETCHING_ROUTE){var e=(d=R.map((function(e){return e.asset})),f=fe.route,d.map((function(e){var t=f&&f.find((function(t){return"Buy"===t.action&&function(e,t){return"id"in t&&t.id?t.id===e.id:"address"in t&&t.address.toLowerCase()===e.address.toLowerCase()&&t.tokenId===e.tokenId}(e,t.assetOut)}));return f&&!t?Object(K.a)(Object(K.a)({},e),{},{isUnavailable:!0}):t&&"priceInfo"in t.assetOut&&e.priceInfo.basePrice!==t.assetOut.priceInfo.basePrice?Object(K.a)(Object(K.a)({},e),{},{updatedPriceInfo:t.assetOut.priceInfo}):Object(K.a)(Object(K.a)({},e),{},{orderSource:t&&"orderSource"in t.assetOut?t.assetOut.orderSource:void 0})}))),n=e.filter((function(e){return e.updatedPriceInfo})).sort(Y),a=e.filter((function(e){return e.isUnavailable})),s=e.filter((function(e){return!e.updatedPriceInfo&&!e.isUnavailable})),i=s.length>0,o=n.length>0,u=a.length>0,l=i||o||u,b=o||u;m([].concat(Object(c.a)(a.map((function(e){return{asset:e,status:j.b.UNAVAILABLE}}))),Object(c.a)(n.map((function(e){return{asset:e,status:j.b.REVIEWING_PRICE_CHANGE}}))),Object(c.a)(s.map((function(e){return{asset:e,status:j.b.REVIEWED}}))))),g(!1),r(l?b?o?j.c.IN_REVIEW:j.c.CONFIRM_REVIEW:j.c.CONFIRMING_IN_WALLET:j.c.ADDING_TO_BAG)}else fe&&t===j.c.FETCHING_FINAL_ROUTE&&r(j.c.CONFIRMING_IN_WALLET);var d,f}),[fe]);var ze=Object(y.useMemo)((function(){return{unchangedAssets:R.filter((function(e){return e.status===j.b.ADDED_TO_BAG||e.status===j.b.REVIEWED})).map((function(e){return e.asset})),priceChangedAssets:R.filter((function(e){return e.status===j.b.REVIEWING_PRICE_CHANGE})).map((function(e){return e.asset})),unavailableAssets:R.filter((function(e){return e.status===j.b.UNAVAILABLE})).map((function(e){return e.asset})),availableItems:R.filter((function(e){return e.status!==j.b.UNAVAILABLE}))}}),[R]),xe=ze.unchangedAssets,ve=ze.priceChangedAssets,Ie=ze.unavailableAssets,Ee=ze.availableItems;Object(y.useEffect)((function(){var e=ve.length>0,n=Ie.length>0,c=R.length>0;t===j.c.ADDING_TO_BAG&&(J&&q(!1),P.setQueryData("assetsRoute",void 0)),t===j.c.FETCHING_ROUTE&&(n&&m(R.filter((function(e){return e.status!==j.b.UNAVAILABLE}))),g(!0),ge()),t!==j.c.IN_REVIEW||e||(P.setQueryData("assetsRoute",void 0),r(c?j.c.CONFIRM_REVIEW:j.c.ADDING_TO_BAG)),t===j.c.FETCHING_FINAL_ROUTE&&(n&&m(R.filter((function(e){return e.status!==j.b.UNAVAILABLE}))),l&&b(!1),!d&&g(!0),ge())}),[t,R,ve,Ie]),Object(y.useEffect)((function(){d&&!J&&q(!0)}),[d,J]),Object(y.useEffect)((function(){x&&v()}),[T]);var Ne=R.length>0||Ie.length>0;return Object(h.jsx)(h.Fragment,{children:x&&_?Object(h.jsxs)(U.a,{children:[Object(h.jsxs)(f.b,{className:"_1jcz50r1 rgw6ez41z rgw6ez38n rgw6ez3ci rgw6ez13t rgw6ez1a5 rgw6ez335 rgw6ez4dz rgw6ez46b rgw6ez2iz rgw6ez22n rgw6ez3kz rgw6ez3k0",children:[Object(h.jsx)(re,{numberOfAssets:R.length,toggleBag:v,resetFlow:O}),0===R.length&&t===j.c.ADDING_TO_BAG&&Object(h.jsx)(ee,{}),Object(h.jsx)(te,{top:!0,show:ae&&ue>0}),Object(h.jsxs)(f.b,{ref:function(e){if(null!==e){var t=e.scrollHeight>e.clientHeight;t!==ae&&se(t)}},className:"_1jcz50r3 rgw6ez28h rgw6ez2dz rgw6ez1t5 rgw6ez69x",onScroll:function(e){var t=e.currentTarget.scrollTop,r=e.currentTarget.clientHeight,n=e.currentTarget.scrollHeight;le(t?(t+r)/n*100:0)},gap:"12",children:[Object(h.jsxs)(f.b,{display:ve.length>0||Ie.length>0?"flex":"none",children:[Ie.length>0&&Object(h.jsx)(G,{assets:Ie,clearUnavailableAssets:function(){return m(Ee)},didOpenUnavailableAssets:l,setDidOpenUnavailableAssets:b,isMobile:C}),ve.map((function(e,t){return Object(h.jsx)(L,{asset:e,markAssetAsReviewed:n,top:0===t&&0===Ie.length,isMobile:C},e.id)}))]}),Object(h.jsx)(f.b,{gap:"8",children:xe.map((function(e){return Object(h.jsx)(H,{asset:e,removeAsset:p,showRemove:!0,isMobile:C},e.id)}))})]}),Object(h.jsx)(te,{show:ae&&ue<100}),Ne&&Object(h.jsx)(z,{balance:he,sufficientBalance:pe,isConnected:A,totalEthPrice:Oe,totalUsdPrice:we,bagStatus:t,setBagStatus:r,fetchReview:function(){r(j.c.FETCHING_ROUTE)},assetsAreInReview:R.some((function(e){return e.status===j.b.REVIEWING_PRICE_CHANGE}))})]}),J&&Object(h.jsx)(B,{onClick:function(){return d?void 0:q(!1)}})]}):null})}}}]);
//# sourceMappingURL=9.49af80d1.chunk.js.map