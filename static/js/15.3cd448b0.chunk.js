(this["webpackJsonp@uniswap/interface"]=this["webpackJsonp@uniswap/interface"]||[]).push([[15],{1661:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=function(e,t){var n=Math.floor(e);return"".concat(n," ").concat(t).concat(1===n?"":"s")},a=function(e){return 1!==e?"s":""}},1666:function(e,t,n){"use strict";n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return I})),n.d(t,"c",(function(){return C}));var r=n(4),a=n.n(r),c=n(15),s=n(69),o=n(190),i=n(149),u=n(1687),d=n(1716),l=n(1658),b=n(692),f=n(694),p=n(602),j=n(279),O=n(376),g=n(13),m=n(491),v=n(108),h=n(451),A="tuple(uint256 price, bytes data)",E=["uint256","address","uint256","uint256","uint256","uint256","address","bytes","uint256","".concat(A,"[]")],x="tuple(uint256 salt, address user, uint256 network, uint256 intent, uint256 delegateType, uint256 deadline, address currency, bytes dataMask, ".concat(A,"[] items, bytes32 r, bytes32 s, uint8 v, uint8 signVersion)"),T=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=O.b.encode(E,[n.salt,n.user,n.network,n.intent,n.delegateType,n.deadline,n.currency,n.dataMask,n.items.length,n.items]),c=Object(v.keccak256)(r),e.next=4,t.send("personal_sign",[c,n.user]);case 4:s=e.sent,n.r="0x".concat(s.slice(2,66)),n.s="0x".concat(s.slice(66,130)),n.v=parseInt(s.slice(130,132),16),P(n);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(e){e.v<27&&(e.v=e.v+27)},k=function(e){return O.b.encode([x],[e])},R=function(e,t,n){return{salt:function(){var e=s.a.from(Object(h.a)(16)).toHexString();return Object(g.hexZeroPad)(e,64)}(),user:e,network:1,intent:1,delegateType:1,deadline:t,currency:m.a,dataMask:"0x",items:n.map((function(e){return{price:e.price,data:(t=e.tokens,O.b.encode(["tuple(address token, uint256 tokenId)[]"],[t]))};var t})),r:"",s:"",v:0,signVersion:1}},_=[{name:"LooksRare",fee:2,icon:"/nft/svgs/marketplaces/looksrare.svg"},{name:"OpenSea",fee:2.5,icon:"/nft/svgs/marketplaces/opensea.svg"},{name:"X2Y2",fee:.5,icon:"/nft/svgs/marketplaces/x2y2.svg"}],S=function(e,t){return{amount:e,recipient:t}},N=function(e,t,n){var r=b.e*b.a,a=e.creatorPercentage*b.a,c=b.a-r-a,o=t.mul(s.a.from(r)).div(s.a.from(b.a)).toString(),i=t.mul(s.a.from(a)).div(s.a.from(b.a)).toString(),u=t.mul(s.a.from(c)).div(s.a.from(b.a)).toString();return{sellerFee:S(u,n),openseaFee:S(o,b.g),creatorFee:a>0?S(i,e.asset_contract.payout_address):void 0}};function I(e,t,n,r){return y.apply(this,arguments)}function y(){return(y=Object(c.a)(a.a.mark((function e(t,n,r,c){var s,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new o.Contract(n,f,r),e.next=3,r.getAddress();case 3:return i=e.sent,c(j.d.PENDING),e.prev=5,e.next=8,s.isApprovedForAll(i,t);case 8:if(!e.sent){e.next=12;break}return c(j.d.APPROVED),e.abrupt("return");case 12:return c(j.d.SIGNING),e.next=15,s.setApprovalForAll(t,!0);case 15:return u=e.sent,c(j.d.PENDING),e.next=19,u.wait();case 19:1===e.sent.status?c(j.d.APPROVED):c(j.d.FAILED),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(5),4001===e.t0.code?c(j.d.REJECTED):c(j.d.FAILED);case 26:case"end":return e.stop()}}),e,null,[[5,23]])})))).apply(this,arguments)}function C(e,t,n,r){return D.apply(this,arguments)}function D(){return D=Object(c.a)(a.a.mark((function e(t,n,r,c){var o,f,O,g,m,v,h,A,E,x,P,_,S,I,y,C,D,w,L,F,G,W,M,B,K,V,Y=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O=Y.length>4&&void 0!==Y[4]?Y[4]:0,g=Y.length>5?Y[5]:void 0,m=new d.Seaport(c,{conduitKeyToConduit:b.h,overrides:{defaultConduitKey:b.d}}),e.next=5,r.getAddress();case 5:if(v=e.sent,(h=null===(o=n.newListings)||void 0===o||null===(f=o.find((function(e){return e.marketplace.name===t.name})))||void 0===f?void 0:f.price)&&n.expirationTime){e.next=9;break}return e.abrupt("return",!1);case 9:e.t0=t.name,e.next="OpenSea"===e.t0?12:"LooksRare"===e.t0?34:"X2Y2"===e.t0?54:72;break;case 12:return e.prev=12,A=Object(i.parseEther)("".concat(h)),E=N(n,A,v),x=E.sellerFee,P=E.openseaFee,_=E.creatorFee,S=[x,P,_].filter((function(e){return void 0!==e})),e.next=18,m.createOrder({offer:[{itemType:l.ItemType.ERC721,token:n.asset_contract.address,identifier:n.tokenId,amount:"1"}],consideration:S,endTime:n.expirationTime.toString(),zone:b.f,restrictedByZone:!0,allowPartialFills:!0},v);case 18:return I=e.sent,y=I.executeAllActions,e.next=22,y();case 22:return C=e.sent,e.next=25,Object(p.e)(b.i,C);case 25:return e.sent&&g(j.d.APPROVED),e.abrupt("return",!0);case 30:return e.prev=30,e.t1=e.catch(12),4001===e.t1.code?g(j.d.REJECTED):g(j.d.FAILED),e.abrupt("return",!1);case 34:return D=u.b[u.a.MAINNET],w=Math.round(Date.now()/1e3),L={isOrderAsk:!0,signer:v,collection:n.asset_contract.address,price:Object(i.parseEther)(h.toString()),tokenId:s.a.from(n.tokenId),amount:s.a.from(1),strategy:D.STRATEGY_STANDARD_SALE,currency:D.WETH,nonce:s.a.from(O),startTime:s.a.from(w),endTime:s.a.from(n.expirationTime),minPercentageToAsk:s.a.from(1e4).sub(s.a.from(200).add(s.a.from(1e4*n.creatorPercentage))).toNumber(),params:[]},e.prev=37,e.next=40,Object(u.c)(r,u.a.MAINNET,L,Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AMPLITUDE_KEY:"b8f7dabddb1c3b03b394619767972160",REACT_APP_AMPLITUDE_TEST_KEY:"1c694b28cd089acc2c386d518f93a775",REACT_APP_AWS_API_ACCESS_KEY:"AKIAYJJWW6AQ47ODATHN",REACT_APP_AWS_API_ACCESS_SECRET:"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",REACT_APP_AWS_API_ENDPOINT:"https://beta.api.uniswap.org/v1/graphql",REACT_APP_AWS_API_REGION:"us-east-2",REACT_APP_AWS_X_API_KEY:"z9dReS5UtHu7iTrUsTuWRozLthi3AxOZlvobrIdr14",REACT_APP_FIREBASE_KEY:"AIzaSyBcZWwTcTJHj_R6ipZcrJkXdq05PuX0Rs0",REACT_APP_FORTMATIC_KEY:"pk_live_F937DF033A1666BF",REACT_APP_GOOGLE_ANALYTICS_ID:"G-KDP9B6W4H8",REACT_APP_INFURA_KEY:"099fc58e0de9451d80b18d7c74caa7c1",REACT_APP_TEMP_API_URL:"https://temp.api.uniswap.org/v1"}).REACT_APP_LOOKSRARE_MARKETPLACE_CONTRACT||"");case 40:return F=e.sent,g(j.d.PENDING),G={signature:F,tokenId:n.tokenId,collection:n.asset_contract.address,strategy:D.STRATEGY_STANDARD_SALE,currency:D.WETH,signer:v,isOrderAsk:!0,nonce:O,amount:1,price:Object(i.parseEther)(h.toString()).toString(),startTime:w,endTime:n.expirationTime,minPercentageToAsk:1e4-(200+1e4*n.creatorPercentage),params:[]},e.next=45,Object(p.f)(G);case 45:return(W=e.sent)&&g(j.d.APPROVED),e.abrupt("return",W);case 50:return e.prev=50,e.t2=e.catch(37),4001===e.t2.code?g(j.d.REJECTED):g(j.d.FAILED),e.abrupt("return",!1);case 54:return M={price:Object(i.parseEther)(h.toString()),tokens:[{token:n.asset_contract.address,tokenId:s.a.from(parseFloat(n.tokenId))}]},B=R(v,n.expirationTime,[M]),e.prev=56,e.next=59,T(c,B);case 59:return K={order:k(B),isBundle:!1,bundleName:"",bundleDesc:"",orderIds:[],changePrice:!1,isCollection:!1},g(j.d.PENDING),e.next=63,Object(p.o)(K);case 63:return(V=e.sent)&&g(j.d.APPROVED),e.abrupt("return",V);case 68:return e.prev=68,e.t3=e.catch(56),4001===e.t3.code?g(j.d.REJECTED):g(j.d.FAILED),e.abrupt("return",!1);case 72:return e.abrupt("return",!1);case 73:case"end":return e.stop()}}),e,null,[[12,30],[37,50],[56,68]])}))),D.apply(this,arguments)}},1917:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n.n(r),c=n(47),s=n(15),o=n(11),i=n(1687),u=n(16),d=n(76),l=n(117),b=n(137),f=n(328),p=n(79),j=n(219),O=n(602),g=n(279),m=n(1661),v=n(1),h=n(1728),A=n(1696),E=n(230),x=n(458),T=n(0),P=function(e){var t=e.sectionTitle,n=e.caption,r=void 0===n?void 0:n,i=e.title,u=void 0===i?void 0:i,p=e.rows,O=e.index,m=e.openIndex,h=e.isSuccessScreen,P=void 0!==h&&h,k=Object(v.useState)(!1),R=Object(o.a)(k,2),_=R[0],S=R[1],N=p.some((function(e){return e.status!==g.d.APPROVED})),I=Object(j.k)((function(e){return e.sellAssets})),y=Object(j.k)((function(e){return e.removeAssetMarketplace})),C=function(e){if(1===O){var t,n=Object(c.a)(I);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.asset_contract.address===e.collectionAddress&&y(r,e.marketplace)}}catch(a){n.e(a)}finally{n.f()}}else y(e.asset,e.marketplace)};function D(e){var t,n,r=e,a=r.asset.newListings;return null!==(t=null===a||void 0===a||null===(n=a.find((function(e){return e.marketplace.name===r.marketplace.name})))||void 0===n?void 0:n.price)&&void 0!==t?t:0}Object(v.useEffect)((function(){S(O===m)}),[O,m]);var w=!N&&p.length>0&&!P;return Object(T.jsxs)(l.c,{flexWrap:"wrap",className:f.l,marginTop:"10",marginBottom:"10",onClick:function(){return p.length>0&&S(!_)},color:w?"green":"textPrimary",children:[w&&Object(T.jsx)(b.a,{style:{marginRight:"8px"}}),t,!P&&Object(T.jsx)(b.n,{className:Object(E.default)("".concat(_?"":A.c," ").concat(A.b))}),(_||P)&&Object(T.jsxs)(l.b,{gap:"12",width:"full",paddingTop:P?"28":"auto",className:Object(E.default)(!P&&A.e),children:[r&&Object(T.jsx)(d.b,{color:"textPrimary",fontWeight:"normal",className:r,children:r}),u&&Object(T.jsx)(d.b,{color:"textSecondary",className:f.a,children:u}),Object(T.jsx)(l.b,{gap:"8",children:p.map((function(e,t){var n;return Object(T.jsxs)(l.b,{gap:"8",children:[Object(T.jsxs)(l.c,{children:[e.images.map((function(t,n){return Object(T.jsx)(d.b,{as:"img",height:"20",width:"20",borderRadius:0===n&&e.collectionAddress?"round":"4",style:{zIndex:2-n},className:A.d,src:t,alt:e.name},n)})),Object(T.jsx)(d.b,{marginLeft:"8",marginRight:"auto",fontWeight:"normal",color:"textPrimary",textOverflow:"ellipsis",overflow:"hidden",maxWidth:{sm:"max",md:e.status===g.d.REJECTED||e.status===g.d.FAILED?"120":"full"},className:f.c,children:e.name}),P?D(e)&&"".concat(Object(x.c)(Object(x.f)(null!==(n=D(e))&&void 0!==n?n:0).toString())," ETH"):e.status===g.d.APPROVED?Object(T.jsx)(b.a,{height:"20",width:"20"}):e.status===g.d.FAILED||e.status===g.d.REJECTED?Object(T.jsxs)(l.c,{gap:"4",children:[Object(T.jsx)(d.b,{fontWeight:"normal",fontSize:"14",color:"textSecondary",children:e.status}),Object(T.jsx)(b.B,{})]}):e.status===g.d.SIGNING&&Object(T.jsx)(b.K,{height:"20",width:"20",stroke:"#4673FA"})]}),(e.status===g.d.FAILED||e.status===g.d.REJECTED)&&Object(T.jsxs)(l.c,{gap:"8",justifyContent:"center",children:[Object(T.jsx)(d.b,{width:"120",as:"button",className:f.f,borderRadius:"12",border:"none",color:"red400",height:"32",cursor:"pointer",style:{backgroundColor:"#FA2B391A"},onClick:function(){var t=Object(s.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.stopPropagation(),C(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Remove"}),Object(T.jsx)(d.b,{width:"120",as:"button",className:f.f,borderRadius:"12",border:"none",color:"genieBlue",height:"32",cursor:"pointer",style:{backgroundColor:"#4C82FB29"},onClick:function(){var t=Object(s.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.stopPropagation(),!e.callback){t.next=4;break}return t.next=4,e.callback();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Try again"})]})]},t)}))})]})]})},k=n(1697);t.default=function(){var e=Object(u.useWeb3React)().provider,t=Object(j.k)((function(e){return e.sellAssets})),n=null===e||void 0===e?void 0:e.getSigner(),r=Object(j.i)((function(e){return e.listings})),E=Object(j.i)((function(e){return e.setListings})),x=Object(j.i)((function(e){return e.collectionsRequiringApproval})),R=Object(j.i)((function(e){return e.setCollectionsRequiringApproval})),_=Object(v.useState)(0),S=Object(o.a)(_,2),N=S[0],I=S[1],y=Object(j.i)((function(e){return e.listingStatus})),C=Object(j.i)((function(e){return e.setListingStatus})),D=Object(v.useState)(!1),w=Object(o.a)(D,2),L=w[0],F=w[1],G=Object(j.i)((function(e){return e.looksRareNonce})),W=Object(j.i)((function(e){return e.setLooksRareNonce})),M=Object(j.i)((function(e){return e.getLooksRareNonce})),B=Object(j.d)((function(e){return e.toggleBag})),K=Object(v.useRef)(G),V=Object(j.g)();Object(v.useEffect)((function(){j.i.subscribe((function(e){return K.current=e.looksRareNonce}))}),[]);var Y=Object(v.useMemo)((function(){return Object(k.d)(t)}),[t]);Object(v.useEffect)((function(){(null===x||void 0===x?void 0:x.length)&&F(x.every((function(e){return e.status===g.d.APPROVED}))),!L||y!==g.d.PENDING&&y!==g.d.CONTINUE||J()}),[x,L]);var H=function(){var e=Object(s.a)(a.a.mark((function e(){var t,r,s,o,u,d,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return C(g.d.SIGNING),t=i.b[i.a.MAINNET],e.next=6,n.getAddress();case 6:return r=e.sent,e.next=9,Object(O.n)(r);case 9:s=e.sent,W(null!==s&&void 0!==s?s:0),(null===x||void 0===x?void 0:x.some((function(e){return e.status===g.d.PAUSED})))||(C(g.d.SIGNING),I(1)),o=t.TRANSFER_MANAGER_ERC721,u=Object(c.a)(x);try{for(u.s();!(d=u.n()).done;)l=d.value,Object(k.h)(l.status)&&Object(k.a)(l,x,R,n,o,U)}catch(a){u.e(a)}finally{u.f()}case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var t=Object(s.a)(a.a.mark((function t(){var s,o,i,u,d,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&e){t.next=2;break}return t.abrupt("return");case 2:C(g.d.SIGNING),I(2),o=Object(c.a)(r),t.prev=5,o.s();case 7:if((i=o.n()).done){t.next=15;break}if(u=i.value,t.t0=Object(k.h)(u.status),!t.t0){t.next=13;break}return t.next=13,Object(k.g)(u,r,E,n,e,M,W,U);case 13:t.next=7;break;case 15:t.next=20;break;case 17:t.prev=17,t.t1=t.catch(5),o.e(t.t1);case 20:return t.prev=20,o.f(),t.finish(20);case 23:return d=r.every((function(e){return e.status===g.d.APPROVED})),l=r.some((function(e){return e.status===g.d.PAUSED})),d?(I(0),C(g.d.APPROVED)):l||C(g.d.FAILED),t.t2=O.m,t.t3=r,t.next=30,null===n||void 0===n?void 0:n.getAddress();case 30:if(t.t5=s=t.sent,t.t4=null!==t.t5,!t.t4){t.next=34;break}t.t4=void 0!==s;case 34:if(!t.t4){t.next=38;break}t.t6=s,t.next=39;break;case 38:t.t6="";case 39:return t.t7=t.t6,t.next=42,(0,t.t2)(t.t3,t.t7);case 42:case"end":return t.stop()}}),t,null,[[5,17,20,23]])})));return function(){return t.apply(this,arguments)}}(),U=function(){var e,t=Object(c.a)(x);try{for(t.s();!(e=t.n()).done;){var n=e.value;Object(k.e)(n,x,R)}}catch(i){t.e(i)}finally{t.f()}var a,s=Object(c.a)(r);try{for(s.s();!(a=s.n()).done;){var o=a.value;Object(k.e)(o,r,E)}}catch(i){s.e(i)}finally{s.f()}},X=Object(v.useMemo)((function(){return y===g.d.APPROVED}),[y]);return Object(T.jsxs)(l.b,{paddingTop:"20",paddingBottom:"20",paddingLeft:"12",paddingRight:"12",children:[Object(T.jsxs)(l.c,{className:f.j,marginBottom:"10",children:[V&&!X&&Object(T.jsx)(d.b,{paddingTop:"4",marginRight:"4",onClick:B,children:Object(T.jsx)(b.l,{height:28,width:28})}),X?"Success!":"Listing ".concat(t.length," NFTs"),Object(T.jsx)(d.b,{as:"button",border:"none",color:"textSecondary",backgroundColor:"backgroundSurface",marginLeft:"auto",marginRight:"0",paddingRight:"0",display:{sm:"flex",md:"none"},cursor:"pointer",onClick:B,children:Object(T.jsx)(b.qb,{height:28,width:28,fill:p.c.colors.textPrimary})})]}),Object(T.jsx)(l.b,{overflowX:"hidden",overflowY:"auto",style:{maxHeight:"60vh"},children:X?Object(T.jsx)(P,{sectionTitle:"Listed ".concat(r.length," item").concat(Object(m.a)(r.length)," for sale"),rows:r,index:0,openIndex:N,isSuccessScreen:!0}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(P,{sectionTitle:"Approve ".concat(x.length," collection").concat(Object(m.a)(x.length)),title:"COLLECTIONS",rows:x,index:1,openIndex:N}),Object(T.jsx)(P,{sectionTitle:"Confirm ".concat(r.length," listing").concat(Object(m.a)(r.length)),caption:"Now you can sign to list each item",title:"NFTS",rows:r,index:2,openIndex:N})]})}),Object(T.jsx)("hr",{className:A.f}),Object(T.jsxs)(l.c,{className:f.l,marginTop:"12",marginBottom:X?"8":"20",children:["Return if sold",Object(T.jsxs)(l.c,{className:f.m,marginLeft:"auto",marginRight:"0",children:[Y,"\xa0ETH"]})]}),X?Object(T.jsxs)(d.b,{as:"span",className:f.g,color:"textSecondary",children:["Status:"," ",Object(T.jsx)(d.b,{as:"span",color:"green200",children:"Confirmed"})]}):Object(T.jsx)(h.a,{onClick:function(){!function(){var e,t=Object(c.a)(x);try{for(t.s();!(e=t.n()).done;){var n=e.value;Object(k.f)(n,x,R)}}catch(i){t.e(i)}finally{t.f()}var a,s=Object(c.a)(r);try{for(s.s();!(a=s.n()).done;){var o=a.value;Object(k.f)(o,r,E)}}catch(i){s.e(i)}finally{s.f()}}(),L?J():H()},buttonText:"Start listing",showWarningOverride:V}),(y===g.d.PENDING||y===g.d.SIGNING)&&Object(T.jsx)(d.b,{as:"button",border:"none",backgroundColor:"backgroundSurface",cursor:"pointer",color:"orange",className:A.a,onClick:function(){U()},type:"button",children:"Stop listing"})]})}}}]);
//# sourceMappingURL=15.3cd448b0.chunk.js.map